var m={necessary:["security_storage"],functional:["functionality_storage","personalization_storage"],analytics:["analytics_storage"],marketing:["ad_storage","ad_user_data","ad_personalization"]},S={cookieName:"cc_consent",cookieDomain:"",cookieExpiry:365,consentVersion:"1",gtmId:""},d={necessary:!0,functional:!1,analytics:!1,marketing:!1},o={...S},t=null,l="hidden",C=new Set,p=new Set,g=!1,i=typeof window<"u";function y(){i&&(window.dataLayer=window.dataLayer||[],typeof window.gtag!="function"&&(window.gtag=function(){window.dataLayer.push(arguments)}))}function u(n){y();let a={};for(let[e,c]of Object.entries(m)){let s=n[e];for(let f of c)a[f]=s?"granted":"denied"}window.gtag("consent","default",a)}function x(n,a){y();let e={};for(let[c,s]of Object.entries(m)){let f=n[c];for(let w of s)e[w]=f?"granted":"denied"}window.gtag("consent","update",e),window.dataLayer.push({event:"consent_update",consent_action:a,consent_categories:{...n}})}function b(){if(!i)return null;let n=document.cookie.match(new RegExp(`(?:^|; )${o.cookieName}=([^;]*)`));if(!n)return null;try{return JSON.parse(decodeURIComponent(n[1]))}catch{return null}}function h(n){if(!i)return;let a=encodeURIComponent(JSON.stringify(n)),e=[`${o.cookieName}=${a}`,"path=/",`max-age=${o.cookieExpiry*86400}`,"SameSite=Lax"];o.cookieDomain&&e.push(`domain=${o.cookieDomain}`),location.protocol==="https:"&&e.push("Secure"),document.cookie=e.join("; ")}function I(){if(!i)return;let n=[`${o.cookieName}=`,"path=/","max-age=0","SameSite=Lax"];o.cookieDomain&&n.push(`domain=${o.cookieDomain}`),document.cookie=n.join("; ")}function _(n){if(t)for(let a of C)try{a(t,n)}catch{}}function R(){for(let n of p)try{n(l)}catch{}}function r(n){l!==n&&(l=n,R())}function U(n={}){if(!i)return null;o={...S,...n},y();let a=!!navigator.globalPrivacyControl,e=b();if(a&&!e){let s={...d,necessary:!0};return t={categories:s,consentVersion:o.consentVersion,timestamp:new Date().toISOString(),gpc:!0},u(s),h(t),g=!0,r("hidden"),t}if(e&&e.consentVersion===o.consentVersion)return t=e,u(e.categories),g=!0,r("hidden"),t;let c={...d};return u(c),t=null,g=!0,r("banner"),null}function v(){return t?{...t,categories:{...t.categories}}:null}function A(){return{...o}}function V(){return l}function D(){return t?t.consentVersion===o.consentVersion:!1}function k(n,a="custom"){if(!i)throw new Error("updateConsent requires a browser environment");let e={necessary:!0,functional:n.functional??!1,analytics:n.analytics??!1,marketing:n.marketing??!1};return t={categories:e,consentVersion:o.consentVersion,timestamp:new Date().toISOString(),gpc:!!navigator.globalPrivacyControl},h(t),x(e,a),_(a),r("hidden"),{...t,categories:{...e}}}function E(){return k({necessary:!0,functional:!0,analytics:!0,marketing:!0},"accept_all")}function L(){return k({necessary:!0,functional:!1,analytics:!1,marketing:!1},"reject_all")}function N(){I(),t=null,i&&u(d),r("banner")}function O(n){return C.add(n),()=>{C.delete(n)}}function j(n){return p.add(n),()=>{p.delete(n)}}function P(){r("banner")}function $(){r("preferences")}function T(){r("hidden")}function q(){r("preferences")}export{E as acceptAll,A as getConfig,v as getConsent,V as getUIState,D as hasValidConsent,T as hideUI,U as init,O as onConsentChange,j as onUIChange,q as openManage,L as rejectAll,N as resetConsent,P as showBanner,$ as showPreferences,k as updateConsent};
//# sourceMappingURL=cookie-consent.esm.js.map
